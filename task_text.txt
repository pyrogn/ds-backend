Практическое задание

Доработать сервис распознающий номерной знак с картинки:

Этап 1

Сделать хендлер, который принимает на вход ID картинки (формат API нужно придумать самостоятельно).

По пришедшему ID нужно скачать картинку со стороннего сервиса:

картинку можно получить запросив URL: http://178.154.220.122:7777/images/<int:img_id>

пример запроса: curl -v http://178.154.220.122:7777/images/10022

в ответ сервис возвращает jpeg картинку в бинарном виде

Список доступных ID: 10022, 9965

После скачивания, нужно распознать номер картинки и отдать ответ в формате JSON

Этап 2

Потребители нашего сервиса хотят отправлять нам сразу несколько ID в одном запросе.

Нужно создать новый хендлер, выполняющий то же самое, только сразу с несколькими картинками (формат API нужно придумать самостоятельно).

Требования к реализации:

Сервис должен учитывать, что при скачивании картинки могут возникнуть проблемы. В таких случаях нужно отдавать понятный ответ с ошибкой.

Желательно написать сервис так, чтобы в нем не было дублирования кода.

Сервис должен запускаться с помощью docker run.

В качестве ответа нужно приложить ссылку на ваш github репозиторий с кодом (можно форкнуть мой репозиторий, ветка final осдержит код. который мы писали на семинаре) 

 

Критерии оценки:

Максимально за это задание можно получить 5 баллов.

сделан хотя бы один из этапов задания и cервис работает при корректных данных +1 балл

сделаны все этапы и они работают при корректных данных +1 балл

сервис обрабатывает ошибки и возвращает логичные коды ответов +2 балла

в том числе должен быть задан таймаут на запрос к внешнему сервису,

код клиента выделен в отдельный модуль и этот модуль используется в вашем хендлере +1 балл

​​​​​​​Например, вместо `requests.get(<url>)` вы должны вызвать `image_provider_client.get_image(image_id)`

В репозитории есть файл plate_reader_client.py. Можно сделать аналогичный клиент для стороннего сервиса  http://51.250.83.169:7878

 

Вопросы для размышления:

(Не нужно письменно на них отвечать)

Какую ошибку нужно вернуть, если сервис раздающий картинки недоступен?

Какую ошибку нужно вернуть, если ID картинки невалидный?

Какую ошибку нужно вернуть, если картинка не найдена?

Попробуйте отправить несколько запросов сервису параллельно. Заметели ли вы, что часть запросов выполняется медленно? Как вам кажется, почему так происходит?

